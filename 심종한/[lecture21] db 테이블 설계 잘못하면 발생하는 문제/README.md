# lecture 21 - db 테이블 설계 잘못하면 발생하는 문제

## 부서와 사원을 관리하는 테이블

| empl_id | empl_name | birth_date | position | salary | dept_id | dept_name | dept_leader_id |
| ------- | --------- | ---------- | -------- | ------ | ------- | --------- | -------------- |
| 1       | MESSI     | ...        | ...      | ...    | 1001    | DEV       | 1              |
| 2       | JINHO     | ...        | ...      | ...    | 1001    | DEV       | 1              |
| 3       | JENNY     | ...        | ...      | ...    | null    | null      | null           |
| ?       | ?         | ?          | ?        | ?      | 1002    | QA        | null           |

### 문제점

부서가 지정되지 않은 직원을 추가할 때, 직원이 없는 부서를 추가할 때 등의 상황에서 불편한 점이 많다.

데이터가 지정되지 않은 경우 null값을 사용해야 한다.
또한 어떤 부서에 직원이 추가될 때마다 기존 부서 저장용 행을 지우고 삽입해야 한다.

이상 현상이 발생할 수 있는 설계다.

- **수정 이상**
  - 부서 이름을 수정하는 경우 모든 행을 수정하지 않는 경우 부서명이 달라지는 현상이 발생할 수 있다.
- **삽입 이상**
  - 부서에 첫 직원 정보를 저장해야 할 때 기존 부서 정보를 저장하는 행을 제거한 후 직원 정보를 저장해야 한다.
- **삭제 이상**

## 테이블을 잘 설계하지 않는 경우

- 중복 데이터 문제
- spurious tupples
- null 값이 많아짐으로 인한 문제점
  - null값이 있는 칼럼으로 조인하는 경우 예상 밖의 결과가 나올 수 있음
  - null값이 있는 칼럼에 aggregate function을 사용했을 때 주의 필요
  - 불필요한 저장공간 낭비
